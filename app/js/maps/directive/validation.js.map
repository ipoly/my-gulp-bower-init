{"version":3,"sources":["directive/validation.coffee"],"names":[],"mappings":"AAAA;AAAA,EAAA,cAAA,CAAA;AAAA,EAEA,OAAO,CAAC,MAAR,CAAe,sBAAf,EAAsC,EAAtC,CACA,CAAC,SADD,CACW,aADX,EAC0B;IACxB,SAAA,GAAA;aACE;AAAA,QAAA,QAAA,EAAU,GAAV;AAAA,QACA,OAAA,EAAQ,UADR;AAAA,QAEA,IAAA,EAAM,SAAC,MAAD,EAAS,IAAT,EAAe,KAAf,EAAsB,OAAtB,GAAA;AACJ,cAAA,QAAA;AAAA,UAAA,IAAA,CAAA,OAAA;AAAA,mBAAO,IAAP,CAAA;WAAA;AAAA,UAEA,QAAA,GAAW,SAAA,GAAA,CAFX,CAAA;iBAIA,MAAM,CAAC,MAAP,CAAc,SAAA,GAAA;mBACZ,OAAO,CAAC,OADI;UAAA,CAAd,EAEE,SAAA,GAAA;AACA,gBAAA,GAAA;AAAA,YAAA,IAAG,OAAO,CAAC,MAAX;AACE,cAAA,GAAA,GAAM,OAAO,CAAC,QAAR,IAAqB,WAA3B,CAAA;qBACA,IAAI,CAAC,OAAL,CAAa,mBAAb,EAAkC,GAAlC,EAFF;aADA;UAAA,CAFF,EAME,IANF,EALI;QAAA,CAFN;QADF;IAAA,CADwB;GAD1B,CAkBA,CAAC,SAlBD,CAkBW,WAlBX,EAkBwB;IACtB,SAAA,GAAA;aACE;AAAA,QAAA,QAAA,EAAU,GAAV;AAAA,QACA,KAAA,EAAO,IADP;AAAA,QAEA,OAAA,EAAS,SAAC,IAAD,EAAO,KAAP,GAAA;AACP,cAAA,oBAAA;AAAA,UAAA,MAAA,GAAS,CAAA,CAAE,yEAAF,CAAT,CAAA;AAAA,UACA,MAAA,GAAS,IAAI,CAAC,OAAL,CAAa,kBAAb,CADT,CAAA;AAEA,UAAA,IAAG,MAAM,CAAC,MAAV;AACE,YAAA,IAAI,CAAC,IAAL,CAAU,cAAV,CAAyB,CAAC,MAA1B,CAAiC,MAAjC,CAAA,CADF;WAAA,MAAA;AAGE,YAAA,IAAI,CAAC,MAAL,CAAY,MAAZ,CAAA,CAHF;WAFA;iBAOA,IAAA,GAAO,SAAC,MAAD,EAAS,IAAT,EAAe,KAAf,GAAA;mBACL,IAAI,CAAC,EAAL,CAAQ,mBAAR,EAA6B,SAAC,CAAD,EAAI,GAAJ,GAAA;AAC3B,cAAA,IAAI,CAAC,WAAL,CAAiB,WAAjB,EAA8B,GAA9B,CAAA,CAAA;qBACA,MAAM,CAAC,QAAP,GAAkB,IAFS;YAAA,CAA7B,CAGA,CAAC,EAHD,CAGI,kBAHJ,EAGwB,SAAC,CAAD,GAAA;AACtB,cAAA,MAAM,CAAC,OAAP,GAAiB,CAAC,CAAC,IAAF,KAAU,SAA3B,CAAA;qBACA,MAAM,CAAC,MAAP,CAAA,EAFsB;YAAA,CAHxB,EADK;UAAA,EARA;QAAA,CAFT;QADF;IAAA,CADsB;GAlBxB,CAFA,CAAA;AAAA","file":"directive/validation.js","sourceRoot":"/source/","sourcesContent":["\"use restrict\"\n# show error message\nangular.module 'validation.directive',[]\n.directive 'formControl', [\n  ->\n    restrict: 'C'\n    require:'?ngModel'\n    link: ($scope, $elm, $attr, ngModel)->\n      return null unless ngModel\n\n      listener = ->\n\n      $scope.$watch ->\n        ngModel.$error\n      , ->\n        if ngModel.$dirty\n          msg = ngModel.$invalid and 'get error'\n          $elm.trigger 'validationChanged', msg\n      , true\n]\n.directive 'formGroup', [\n  ->\n    restrict: 'C'\n    scope: true\n    compile: ($elm, $attr)->\n      helper = $ '<span class=\"error-msg\" ng-if=\"errorMsg && onfocus\">{{errorMsg}}</span>'\n      parent = $elm.parents '.form-horizontal'\n      if parent.length\n        $elm.find('>:last-child').append helper\n      else\n        $elm.append helper\n\n      link = ($scope, $elm, $attr)->\n        $elm.on 'validationChanged', (e, msg)->\n          $elm.toggleClass 'has-error', msg\n          $scope.errorMsg = msg\n        .on 'focusin focusout', (e)->\n          $scope.onfocus = e.type is 'focusin'\n          $scope.$apply()\n]"]}