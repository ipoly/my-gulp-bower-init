{"version":3,"sources":["directive/count-down-to.coffee"],"names":[],"mappings":"AAAA;AAAA,EAAA,cAAA,CAAA;AAAA,EAGA,OAAO,CAAC,MAAR,CAAe,yBAAf,EAAyC,EAAzC,CACA,CAAC,SADD,CACW,aADX,EAC0B;IAAC,WAAD,EACxB,SAAC,SAAD,GAAA;aACE;AAAA,QAAA,QAAA,EAAU,GAAV;AAAA,QACA,KAAA,EACE;AAAA,UAAA,QAAA,EAAU,GAAV;AAAA,UACA,QAAA,EAAU,GADV;SAFF;AAAA,QAIA,OAAA,EAAS,IAJT;AAAA,QAKA,QAAA,EAAU,gUALV;AAAA,QAiBA,IAAA,EAAM,SAAC,MAAD,EAAS,IAAT,EAAe,KAAf,GAAA;AACJ,cAAA,oBAAA;AAAA,UAAA,OAAA,GAAU,IAAV,CAAA;AAAA,UACA,WAAA,GAAc,SAAC,MAAD,GAAA;AACZ,YAAA,MAAM,CAAC,QAAP,GAAkB,MAAlB,CAAA;AACA,YAAA,IAAG,MAAM,CAAC,IAAP,CAAY,MAAZ,CAAH;AACE,cAAA,SAAS,CAAC,MAAV,CAAiB,OAAjB,CAAA,CAAA;qBACA,MAAM,CAAC,QAAP,CAAA,EAFF;aAFY;UAAA,CADd,CAAA;iBAOA,MAAM,CAAC,MAAP,CAAc,UAAd,EAA0B,SAAC,QAAD,GAAA;AACxB,YAAA,SAAS,CAAC,MAAV,CAAiB,OAAjB,CAAA,CAAA;AACA,YAAA,IAAA,CAAA,QAAA;AAAA,qBAAO,WAAA,CAAY,QAAZ,CAAP,CAAA;aADA;AAAA,YAGA,QAAA,GAAe,IAAA,IAAA,CAAK,QAAL,CAHf,CAAA;AAIA,YAAA,IAAA,CAAA,QAAA;AAAA,qBAAO,OAAO,CAAC,IAAR,CAAc,IAAA,GAAG,MAAM,CAAC,UAAV,GAAsB,6BAApC,CAAP,CAAA;aAJA;mBAKA,OAAA,GAAU,SAAA,CAAU,SAAA,GAAA;AAClB,kBAAA,wBAAA;AAAA,cAAA,GAAA,GAAM,GAAA,CAAA,IAAN,CAAA;AAAA,cACA,QAAA,GAAW,QAAA,GAAW,GADtB,CAAA;AAEA,cAAA,IAAG,QAAA,GAAW,CAAd;AACE,gBAAA,SAAA,GAAgB,IAAA,IAAA,CAAM,QAAA,GAAW,CAAA,GAAE,EAAF,GAAK,EAAL,GAAQ,IAAzB,CAAhB,CAAA;uBACA,WAAA,CAAY,CAAC,SAAS,CAAC,YAAV,CAAA,CAAwB,CAAC,OAAzB,CAAiC,KAAjC,EAAwC,EAAxC,CAAD,CAA6C,YAAzD,EAFF;eAAA,MAAA;uBAIE,WAAA,CAAY,QAAZ,EAJF;eAHkB;YAAA,CAAV,EAQR,IARQ,EANc;UAAA,CAA1B,EARI;QAAA,CAjBN;QADF;IAAA,CADwB;GAD1B,CAHA,CAAA;AAAA","file":"directive/count-down-to.js","sourceRoot":"/source/","sourcesContent":["\"use restrict\"\n# require a timestamp string as dead-line to start\n# run call-back expression when count down end\nangular.module 'count-down-to.directive',[]\n.directive 'countDownTo', ['$interval'\n  ($interval)->\n    restrict: 'C'\n    scope:\n      deadLine: '@'\n      callBack: '&'\n    replace: true\n    template: \"\"\"\n      <span ng-if='counting'>\n        <img ng-src='/img/{{counting[0]}}.jpg'/>\n        <img ng-src='/img/{{counting[1]}}.jpg'/>\n        <i></i>\n        <img ng-src='/img/{{counting[2]}}.jpg'/>\n        <img ng-src='/img/{{counting[3]}}.jpg'/>\n        <i></i>\n        <img ng-src='/img/{{counting[4]}}.jpg'/>\n        <img ng-src='/img/{{counting[5]}}.jpg'/>\n      </span>\n    \"\"\"\n    link: ($scope, $elm, $attr)->\n      promise = null\n      setCounting = (string)->\n        $scope.counting = string\n        if /0{6}/.test string\n          $interval.cancel promise\n          $scope.callBack()\n\n      $scope.$watch 'deadLine', (deadLine)->\n        $interval.cancel promise\n        return setCounting '000000' unless deadLine\n\n        deadLine = new Date deadLine\n        return console.warn \"\\\"#{$scope.countDownT}\\\" isn't a valid timestamp.\" unless deadLine\n        promise = $interval ->\n          now = new Date\n          timeLeft = deadLine - now\n          if timeLeft > 0\n            countDown = new Date  timeLeft - 8*60*60*1000\n            setCounting (countDown.toTimeString().replace /\\D/g, '')[0...6]\n          else\n            setCounting '000000'\n        , 1000\n\n]\n\n"]}