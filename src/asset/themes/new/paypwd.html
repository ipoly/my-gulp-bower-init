
		<!--修改安全密码 开始-->


		<form action="/?user&q=code/users/paypwd" name="form1" method="post" onsubmit="return check_form()" enctype="multipart/form-data">


		<div class="user_info_item"><!-- 密码请不要太简单，设成复杂一点，做好字母+符号 --></div>
		
		<div>
		
			<div class="user_info_item">
				<span class="user_info_item_left1">
				原始交易密码：
				</span> 
				<span> 
					<input type="password" name="oldpassword" tabindex="1" /> (初始交易密码与您的登录密码一致)	</span>
			</div>
			
			<div class="user_info_item">
				<span class="user_info_item_left1">
				新交易密码：
				</span> 
				<span> 
					<input type="password" name="newpassword" onKeyUp=pwStrength(this.value) onBlur=pwStrength(this.value) tabindex="2"/> </span>
			</div>

			<div class="user_info_item">
				<span class="user_info_item_left1">
				确认交易密码：
				</span> 
				<span> 
					<input type="password" name="newpassword1"  tabindex="3"/> </span>
			</div>		

			<div class="user_info_item">
				<span class="user_info_item_left1">
				验证码：
				</span> 
				<span> 
					<input name="valicode" type="text" size="11" maxlength="4"  tabindex="4"/> <img src="/?plugins&q=imgcode" alt="点击刷新" onClick="this.src='/?plugins&q=imgcode&t=' + Math.random();" align="absmiddle" style="cursor:pointer;display:inline" /></span>
			</div>	
		
			<div class="user_info_item">
				<span class="user_info_item_left1">&nbsp;</span> 
				<span> <input  id="button" type="submit" name="name"  value="确认提交" size="30" tabindex="5" /></span>
			</div>

		</div>
		
		</form>



		<!--修改安全密码 结束-->


		{literal}<script>


			function check_form(){


				 var frm = document.forms['form1'];


				 var oldpassword = frm.elements['oldpassword'].value;


				 var newpassword = frm.elements['newpassword'].value;


				  var newpassword1 = frm.elements['newpassword1'].value;
                  
                  


				 var errorMsg = '';


				  if (oldpassword.length == 0 ) {


					errorMsg += '* 请输入旧密码，如果没有设定交易密码，请输入登录密码' + '\n';


				  }


				  if (newpassword.length == 0 ) {


					errorMsg += '* 新密码不能为空' + '\n';


				  }


				   if (newpassword.length >15 || newpassword.length<6 ) {


					errorMsg += '* 新密码长度在6到15之间' + '\n';


				  }


				    if (newpassword !=newpassword1) {


					errorMsg += '* 两次密码不一样' + '\n';


				  }
                  

				  if (errorMsg.length > 0){


					alert(errorMsg); return false;


				  } else{  


					return true;


				}
			}
			
			//判断输入密码的类型  
				function CharMode(iN){  
				if (iN>=48 && iN <=57) //数字  
				return 1;  
				if (iN>=65 && iN <=90) //大写  
				return 2;  
				if (iN>=97 && iN <=122) //小写  
				return 4;  
				else  
				return 8;   
				}  
				//bitTotal函数  
				//计算密码模式  
				function bitTotal(num){  
				modes=0;  
				for (i=0;i<4;i++){  
				if (num & 1) modes++;  
				num>>>=1;  
				}  
				return modes;  
				}  
				//返回强度级别  
				function checkStrong(sPW){  
				if (sPW.length<=4)  
				return 0; //密码太短  
				Modes=0;  
				for (i=0;i<sPW.length;i++){  
				//密码模式  
				Modes|=CharMode(sPW.charCodeAt(i));  
				}  
				return bitTotal(Modes);  
				}  
				  
				//显示颜色  
				function pwStrength(pwd){  
				O_color="#eeeeee";  
				L_color="#FF0000";  
				M_color="#FF9900";  
				H_color="#33CC00";  
				if (pwd==null||pwd==''){  
				Lcolor=Mcolor=Hcolor=O_color;  
				}  
				else{  
				S_level=checkStrong(pwd);  
				switch(S_level) {  
				case 0:  
				Lcolor=Mcolor=Hcolor=O_color;  
				case 1:  
				Lcolor=L_color;  
				Mcolor=Hcolor=O_color;  
				break;  
				case 2:  
				Lcolor=Mcolor=M_color;  
				Hcolor=O_color;  
				break;  
				default:  
				Lcolor=Mcolor=Hcolor=H_color;  
				}  
				}  
				document.getElementById("strength_L").style.background=Lcolor;  
				document.getElementById("strength_M").style.background=Mcolor;  
				document.getElementById("strength_H").style.background=Hcolor;  
				return;  
				} 


		</script>{/literal}